<div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <a href="{{ site.baseurl }}/">
        <img class="sidebar-image" src="{{ site.baseurl }}/public/OSCAR_logo.png" alt="OSCAR Symbolic Tools" />
      </a>
      <p class="lead">The OSCAR Project</p>
      <hr>
    </div>

    <nav class="sidebar-nav">
      {% for item in site.data.sidebar %}
        <div class="sidebar-nav-item{% if page.url == item.url %} active{% endif %}">
          <a 
            href="{{ site.baseurl }}{{ item.url }}" 
            class="sidebar-nav-link {% if item.submenu %}has-submenu{% endif %}"
            data-toggle="collapse" 
            data-target="#submenu-{{ forloop.index }}"

          >
            {{ item.title }}
          </a>
          {% if item.submenu %}
            <ul 
              class="collapse{% if page.url contains item.url %} show{% endif %}" 
              id="submenu-{{ forloop.index }}"
            >
              {% for subitem in item.submenu %}
                <li class="{% if page.url == subitem.url %}active{% endif %}">
                  <a href="{{ site.baseurl }}{{ subitem.url }}">{{ subitem.title }}</a>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      {% endfor %}
    </nav>

    <div class="mobile-hidden">
      <hr>
      {% include footer.html %}
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggles = document.querySelectorAll('.sidebar-nav-link.has-submenu');
    toggles.forEach(toggle => {
      toggle.addEventListener('click', function (e) {
        const target = document.querySelector(this.getAttribute('data-target'));
        if (target) {
          e.preventDefault();
          target.classList.toggle('show');
        }
      });
    });
  });
</script>
